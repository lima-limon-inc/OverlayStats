# Calculate format=sqlite
PRAGMA foreign_keys=OFF;
CREATE TABLE Accounts (id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT,provider TEXT,enabled INTEGER);
INSERT INTO Accounts VALUES(1,'#-ur_jid-#','ktp-jabber',1);
CREATE TABLE Services (id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT NOT NULL UNIQUE,display TEXT NOT NULL,provider TEXT,type TEXT);
INSERT INTO Services VALUES(1,'ktp-haze-gadugadu-im','Chat','ktp-gadugadu','IM');
INSERT INTO Services VALUES(2,'ktp-salut-im','Chat','ktp-salut','IM');
INSERT INTO Services VALUES(3,'ktp-generic-im','Chat','ktp-generic','IM');
INSERT INTO Services VALUES(4,'ktp-haze-sametime-im','Chat','ktp-haze-sametime','IM');
INSERT INTO Services VALUES(5,'ktp-kde-talk-im','Chat','ktp-kde-talk','IM');
INSERT INTO Services VALUES(6,'ktp-sipe-im','Chat','ktp-sipe','IM');
INSERT INTO Services VALUES(7,'ktp-haze-icq-im','Chat','ktp-haze-icq','IM');
INSERT INTO Services VALUES(8,'ktp-haze-yahoo-im','Chat','ktp-haze-yahoo','IM');
INSERT INTO Services VALUES(9,'google-im','Google Hangouts','google','IM');
INSERT INTO Services VALUES(10,'ktp-morse-telegram-im','Chat','ktp-morse-telegram','IM');
INSERT INTO Services VALUES(11,'ktp-jabber-im','Chat','ktp-jabber','IM');
INSERT INTO Services VALUES(12,'ktp-haze-skypeweb-im','Chat','ktp-haze-skypeweb','IM');
INSERT INTO Services VALUES(13,'ktp-sipe-haze-im','Chat','ktp-sipe-haze','IM');
INSERT INTO Services VALUES(14,'ktp-haze-aim-im','Chat','ktp-haze-aim','IM');
CREATE TABLE Settings (account INTEGER NOT NULL,service INTEGER,key TEXT NOT NULL,type TEXT NOT NULL,value BLOB);
INSERT INTO Settings VALUES(1,11,'auth/method','s','''password''');
INSERT INTO Settings VALUES(1,11,'auth/mechanism','s','''password''');
INSERT INTO Settings VALUES(1,11,'resource','s','''kde-telepathy-#-rnd(num,6)-#''');
INSERT INTO Settings VALUES(1,11,'account','s','''#-ur_jid-#''');
INSERT INTO Settings VALUES(1,11,'enabled','b','true');
INSERT INTO Settings VALUES(1,0,'username','s','''#-ur_jid-#''');
INSERT INTO Settings VALUES(1,0,'CredentialsId','u','1');
INSERT INTO Settings VALUES(1,0,'name','s','''#-ur_jid-#''');
INSERT INTO Settings VALUES(1,0,'enabled','b','true');
INSERT INTO Settings VALUES(1,11,'telepathy/param-account','s','''#-ur_jid-#''');
INSERT INTO Settings VALUES(1,11,'telepathy/mc-account-name','s','''gabble/jabber/ktp_2djabber_2dim_1''');
INSERT INTO Settings VALUES(1,11,'telepathy/AutomaticPresence','s','''0;;;''');
INSERT INTO Settings VALUES(1,11,'telepathy/HasBeenOnline','s','''true''');
INSERT INTO Settings VALUES(1,11,'telepathy/NormalizedName','s','''#-ur_jid-#''');
INSERT INTO Settings VALUES(1,11,'telepathy/Nickname','s','''#-ur_fullname-#''');
CREATE TABLE Signatures (account INTEGER NOT NULL,service INTEGER,key TEXT NOT NULL,signature TEXT NOT NULL,token TEXT NOT NULL);
DELETE FROM sqlite_sequence;
INSERT INTO sqlite_sequence VALUES('Services',14);
INSERT INTO sqlite_sequence VALUES('Accounts',1);
CREATE INDEX idx_service ON Services(name);
CREATE UNIQUE INDEX idx_setting ON Settings (account, service, key);
CREATE TRIGGER tg_delete_account BEFORE DELETE ON Accounts FOR EACH ROW BEGIN DELETE FROM Settings WHERE account = OLD.id; END;
CREATE UNIQUE INDEX idx_signatures ON Signatures (account, service, key);
